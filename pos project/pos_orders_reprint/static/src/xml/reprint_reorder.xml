<?xml version="1.0" encoding="UTF-8"?>
	<templates id="pos_orders_reprint_template" inherit_id="point_of_sale.template" xml:space="preserve">

		<t t-name="POSOrdersScreen" t-inherit="pos_orders_list.POSOrdersScreen" t-inherit-mode="extension" owl="1">
			<xpath expr="//tr" position="inside">
				<th>Receipt</th>
			</xpath> 
		</t>
		
		<t t-name="POSOrders" t-inherit="pos_orders_list.POSOrders" t-inherit-mode="extension" owl="1">
			<xpath expr="//tr" position="inside">
				<td class="print-order" t-att-data-id='props.order.id' 
					t-on-click.stop="trigger('click-reprint',props.order)">
					<button class="odoo-theme-button"><i class="fa fa-print"></i>RePrint</button>
				</td>
			</xpath> 
		</t>

		<t t-name="OrderReprintScreen" owl="1">
			<div class="receipt-screen screen">
				<div class="screen-content">
					<div class="top-content">
						<span class="button back" t-on-click="back">
							<i class="fa fa-angle-double-left"></i>
							<span> </span>
							<span>Back</span>
						</span>
						<span class="button next highlight" t-on-click="back">
							<span>Ok</span>
							<span> </span>
							<i class="fa fa-angle-double-right"></i>
						</span>
					</div>
					<div class="centered-content">
						<div class="button print" t-on-click="printReceipt">
							<i class="fa fa-print"></i>
							<span> </span>
							<span>RePrint</span>
						</div>
						<div class="pos-receipt-container">
							<OrderReprintReceipt 
								order="props.order"
								barcode = "props.barcode"
								discount = "props.discount"
								orderlines = "props.orderlines"
								paymentlines = "props.paymentlines"
								change = "props.change"
								subtotal = "props.subtotal"	
								tax = "props.tax"	
								user_name = "props.user_name"
								t-ref="order-receipt"						
							/>
						</div>
					</div>
				</div>
			</div>
		</t>

		<t t-name="OrderReprintReceipt" owl="1">
			<div class="pos-receipt">
				<img class="pos-receipt-logo" t-att-src='env.pos.company_logo_base64' alt="Logo" style="width: auto; height: 3em;"/>
				<br/>
				<div class="pos-receipt-contact">
					<t t-if='env.pos.company.name'>
						<div><t t-esc='env.pos.company.name' /></div>
					</t>
	              
                    <div t-if='env.pos.company.street'>
                        <t t-esc="env.pos.company.street" />
                    </div>
                    <div t-if='env.pos.company.street2'>
                        <t t-esc="env.pos.company.street2" />
                    </div>
                    <div t-if='env.pos.company.city'>
                        <t t-esc="env.pos.company.city" />
                        &#x2063;
                        <t t-esc="env.pos.company.state_id[1]" />
						&#x2063;
                        <t t-esc="env.pos.company.zip" />

                    </div>
                    <div t-if='env.pos.company.country'>
                        <t t-esc="env.pos.company.country.name" />
                    </div>

                  

	                <div t-if='env.pos.company.taxpayer_info'>
	                    <t t-esc="env.pos.company.taxpayer_info" />
	                </div>
     

				</div>
				<div style="font-size:75%;">
		        	<br/>
		            <span>Reprint <t t-esc="props.order.pos_reference" /></span>
		          	<span t-esc='props.order.date_order' class="pos-receipt-right-align"/>
		        </div>

				<br /><br />
				<div class='orderlines'>
					<t t-set='zero_rated' t-value="0" />
					<t t-foreach='props.orderlines' t-as='line'>

						<t t-set='zero_rated' t-value="line.zero_rated_sales + zero_rated" />
						<t t-set='simple' t-value='(line.discount === 0 and line.qty === 1)' />
						<div t-if='simple'>
							<t t-esc="line.product_id"/>
							<span t-esc='env.pos.format_currency_no_symbol(line.total_price)' class="price_display pos-receipt-right-align"/>
						</div>
						<t t-if='!simple'>
							<div t-esc='line.product_id'/>
							<t t-if='line.discount !== 0'>
								<div class="pos-receipt-left-padding">
									<t t-esc="env.pos.format_currency_no_symbol(line.price_unit)"/>
								</div>
								<div class="pos-receipt-left-padding">
									Discount: <t t-esc='line.discount' />%
								</div>
							</t>
							<div class="pos-receipt-left-padding">
								<t t-esc="Math.round(line.qty)"/>
								x
								<t t-esc='env.pos.format_currency_no_symbol(line.total_price/line.qty)' />
								<span class="price_display pos-receipt-right-align">
									<t t-esc='env.pos.format_currency_no_symbol(line.total_price)'/>
								</span>
							</div>

						</t>
					</t>
				</div>
				<div class="pos-receipt-right-align">--------</div>
				<br/>

		
				<div class="pos-receipt-amount">
					TOTAL
					<span t-esc='env.pos.format_currency(props.order.amount_total)' class="pos-receipt-right-align"/>
				</div>
				<br/><br/>
				<t t-foreach='props.paymentlines' t-as='line'>
					<div>
						<t t-esc='line.name' />
						<span t-esc='env.pos.format_currency_no_symbol(line.amount)' class="pos-receipt-right-align"/>
					</div>
				</t>
				<br/>
				<div class="pos-receipt-amount receipt-change">
					CHANGE
					<span t-esc='env.pos.format_currency(-props.change)' class="pos-receipt-right-align"/>
				</div>
				<br/>
				<t t-if='discount_total'>
					<div>
						Discounts
						<span t-esc='env.pos.format_currency(props.discount)' class="pos-receipt-right-align"/>
					</div>
				</t>
				<div>
					Total Taxes
					<span t-esc='env.pos.format_currency(props.tax)' class="pos-receipt-right-align"/>
				</div>
				


						<t t-name="OrderReceiptTaxIncluded" owl="1">
        <t t-if="isTaxIncluded">
            <div t-if="env.pos.company.taxpayer_is_vat_registered">
                <div style="border-top:1px dashed black; padding-top: 5mm; margin-top: 5mm;">
                    VATable Sales:
                    <span t-esc="env.pos.format_currency(env.pos.vatable_sales)" class="pos-receipt-right-align" />
                </div>
                <div class="vatable" style="padding-top:1mm;">
                    VAT Amount:
                    <span t-esc="env.pos.format_currency(env.pos.vat_amount)" class="pos-receipt-right-align" />
                </div>
                <div class="zero-rated" style="padding-top:1mm;">
                    Zero Rated Sales:
                    <span t-esc="env.pos.format_currency(env.pos.zero_rated)" class="pos-receipt-right-align" />
                </div>
                <div class="vat-exempt" style="padding-top:1mm; padding-bottom:1mm;">
                    VAT Exempt Sales:
                    <span t-esc="env.pos.format_currency(env.pos.vat_exempt)" class="pos-receipt-right-align" />
                </div>
                <!-- <div style="padding-bottom:1mm;">
                    Discounts:
                    <span class="pos-receipt-right-align">- <span t-esc="env.pos.format_currency(receipt.custom_total_discount)"/></span>
                </div> -->
                <div class="pos-receipt-right-align">--------</div>
                <br/>
                <div class="pos-receipt-amount">
                    TOTAL
                    <span t-esc="env.pos.format_currency(env.pos.sales_total)" class="pos-receipt-right-align"/>
                </div>
            </div>
            <div t-else="">
                <div style="border-top:1px dashed black; padding-top: 5mm; margin-top:5mm;">
                    EXEMPT Sales:
                    <!-- For now the exempt sales is equal to the subtotal(total without taxes).
                    Please alter this later if there is an update regarding the computation -->
                    <span t-esc="env.pos.format_currency(env.pos.subtotal)" class="pos-receipt-right-align" />
                </div>
            </div>
        </t>
    </t>
<!-- Check if i need to add this or not. this is when the session is tax excluded -->
    <t t-name="OrderReceiptNotTaxIncluded" owl="1">
        <div t-if="env.pos.company.taxpayer_is_vat_registered">
            <div style="border-top:1px dashed black; padding-top: 5mm; margin-top: 5mm;">
                VATable Sales:
                <span t-esc="env.pos.format_currency(env.pos.vatable_sales)" class="pos-receipt-right-align" />
            </div>
            <div class="vatable" style="padding-top:1mm;">
                VAT Amount
                <span t-esc="env.pos.format_currency(env.pos.vat_amount)" class="pos-receipt-right-align" />
            </div>
            <div class="zero-rated" style="padding-top:1mm;">
                Zero Rated Sales:
                <span t-esc="env.pos.format_currency(zero_rated)" class="pos-receipt-right-align" />
            </div>
            <div class="vat-exempt" style="padding-top:1mm; padding-bottom:1mm;">
                VAT Exempt Sales:
                <span t-esc="env.pos.format_currency(env.pos.vat_exempt)" class="pos-receipt-right-align" />
            </div>
        </div>
        <div t-else="">
            <div style="border-top:1px dashed black; padding-top: 5mm; margin-top:5mm;">
                EXEMPT Sales:
                <!-- For now the exempt sales is equal to the subtotal(total without taxes).
                Please alter this later if there is an update regarding the computation -->
                <span t-esc="env.pos.format_currency(env.pos.subtotal)" class="pos-receipt-right-align" />
            </div>
        </div>
    </t>
    <br/>
     <div style="text-align:center; font-size:75%; margin-top:10mm;">
            <div class="buyer-info" style="text-align:justify; margin-bottom: 10mm;">
                <!-- Turned this into a table to make the _________ dynamic -->
                <table class="buyer-info-table">
                    <tr>
                        <td>
                            <span>
                                Buyers Name:
                            </span>
                        </td>
                        <td>
                            <span>
                            </span>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <span>
                                SC/PWD ID:
                            </span>
                        </td>
                        <td>
                            <span>
                            </span>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <span>
                                Address:
                            </span>
                        </td>
                        <td>
                            <span>
                            </span>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <span>
                                TIN #:
                            </span>
                        </td>
                        <td>
                            <span>
                            </span>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <span>
                                Bus. Style:
                            </span>
                        </td>
                        <td>
                            <span>
                            </span>
                        </td>
                    </tr>
                </table>                
            </div>
            <!-- <div class="buyer-info" style="text-align:justify; margin-bottom: 10mm;">
                BUYERS NAME:____________________________________
                <br />
                SC/PWD ID:________________________________________ 
                <br />
                ADDRESS:__________________________________________
                <br />
                TIN #:_______________________________________________
                <br />
                BUS STYLE:_________________________________________
                <br />
            </div> -->
            <div>
                POS Provider
            </div>
            <div t-if='env.pos.company.awb_pos_provider_id'>
                <t t-esc="env.pos.company.awb_pos_provider_id[1]" />
            </div>
            <div t-if='env.pos.company.awb_pos_provider_display_address'>
                <t t-esc="env.pos.company.awb_pos_provider_display_address" />
            </div>
            <div t-if='env.pos.company.awb_pos_provider_tin'>
                TIN:
                <t t-esc="env.pos.company.awb_pos_provider_tin" />
            </div>
            <div t-if='env.pos.company.awb_pos_provider_accreditation_no'>
                Accreditation No.:
                <t t-esc="env.pos.company.awb_pos_provider_accreditation_no" />
            </div>
            <div t-if='env.pos.company.awb_pos_provider_display_date'>
                Date Issued:
                <t t-esc="env.pos.company.awb_pos_provider_display_date" />
            </div>
            <div t-if='env.pos.company.awb_pos_provider_display_valid_until'>
                Valid Until:
                <t t-esc="env.pos.company.awb_pos_provider_display_valid_until" />
            </div>
            <br/>
           <!--  <div t-if='receipt.machine_info.ptu'>
                PTU No.:
                <t t-esc="receipt.machine_info.ptu" />
            </div>
            
            <div t-if='receipt.machine_info.min'>
                MIN:
                <t t-esc="receipt.machine_info.min" />
            </div>
            <div t-if='receipt.machine_info.sn'>
                SN:
                <t t-esc="receipt.machine_info.sn" />
            </div>

            <div t-if='receipt.machine_info.remarks' style="margin-top:5mm;">
                <t t-esc="receipt.machine_info.remarks" />
            </div> -->
        </div>
    <div class='before-footer' />
				<br/>
                <!--
				<div class="pos-receipt-order-data">
					<div>Reprint <t t-esc='props.order.pos_reference' /></div>
					<div><t t-esc='props.order.date_order' /></div>
				</div>
                -->
				<t t-if="env.pos.config.show_barcode">
					<div>
						<span style="display:none;" t-esc="receiptBarcode"/>
						<div style="margin:auto;margin-top:10px;" id="barcode_print1"></div>
					</div>
				</t>
			</div>
		</t>

</templates>
