<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="res_company_form_inherit_fields" model="ir.ui.view">
        <field name="name">res.company.form.inherit.fields</field>
        <field name="model">res.company</field>
        <field name="inherit_id" ref="awb_l10n_ph_pos.view_company_form"/>
        <field name="arch" type="xml">
            <xpath expr="//page[@name='awb_page_point_of_sale']//field[@name='awb_pos_provider_valid_until']" position="after">
                <field name="pos_config_id"/>
                <field name="taxpayer_min" force_save="1"/>
                <field name="taxpayer_machine_serial_number" force_save="1"/>
                <field name="awb_pos_provider_ptu" force_save="1"/>
                <field name="awb_pos_provider_remarks" string="Remarks"/>
                <field name="awb_pos_provider_is_training_mode" string="Training Mode"/>
                </xpath>
        </field>
    </record>

    <!-- SUB TREES PER BUTTON CATEGORY -->
    <record id="z_reading_view_returns_tree" model="ir.ui.view">
        <field name="name">z_reading.view.returns.tree</field>
        <field name="model">pos.order</field>
        <field name="arch" type="xml">
                <tree string="POS Orders" create="0" sample="1" decoration-info="state == 'draft'" decoration-muted="state == 'cancel'">
                    <field name="currency_id" invisible="1"/>
                    <field name="name" decoration-bf="1"/>
                    <field name="session_id"/>
                    <field name="date_order"/>
                    <field name="pos_reference"/>
                    <field name="partner_id"/>
                    <field string="Cashier" name="user_id" widget="many2one_avatar_user"/>
                    <field name="amount_total" sum="Amount total" widget="monetary" decoration-bf="1"/>
                    <field name="state" widget="badge" decoration-info="state == 'draft'" decoration-success="state not in ('draft','cancel')"/>
                </tree>
        </field>
    </record>

    <record id="z_reading_view_sales_tree" model="ir.ui.view">
        <field name="name">z_reading.view.sales.tree</field>
        <field name="model">pos.order</field>
        <field name="arch" type="xml">
            <tree string="POS Orders" create="0" sample="1" decoration-info="state == 'draft'" decoration-muted="state == 'cancel'">
                <field name="currency_id" invisible="1"/>
                <field name="name" decoration-bf="1"/>
                <field name="session_id"/>
                <field name="date_order"/>
                <field name="pos_reference"/>
                <field name="partner_id"/>
                <field string="Cashier" name="user_id" widget="many2one_avatar_user"/>
                <field name="amount_total" sum="Amount total" widget="monetary" decoration-bf="1"/>
                <field name="state" widget="badge" decoration-info="state == 'draft'" decoration-success="state not in ('draft','cancel')"/>
            </tree>
        </field>
    </record>

    <record id="z_reading_view_discounts_tree" model="ir.ui.view">
        <field name="name">z_reading.view.discounts.tree</field>
        <field name="model">pos.order.line</field>
        <field name="arch" type="xml">
            <tree string="POS Order Lines">
                <!-- <field name="currency_id" invisible="1"/> -->
                <field name="name" decoration-bf="1"/>
                <field name="order_id" decoration-bf="1"/>
                <field name="write_date"/>
                <field name="discount"/>
                <!-- add discount price -->
                <!-- <t t-set="discount_price" t-value="(qty * price_unit) * \ (discount / 100)"/>
                <t t-esc="discount_price"/> -->
                <field name="price_subtotal_incl" sum="Amount total" widget="monetary" decoration-bf="1"/>
            </tree>
        </field>
    </record>

    <record id="z_reading_view_vat_sales_tree" model="ir.ui.view">
        <field name="name">z_reading.view.vat_sales.tree</field>
        <field name="model">pos.order.line</field>
        <field name="arch" type="xml">
            <tree string="POS Order Lines">
                <field name="name" decoration-bf="1"/>
                <field name="order_id" decoration-bf="1"/>
                <field name="write_date"/>
                <field name="tax_ids_after_fiscal_position" widget="many2many_tags" string="Taxes"/>
                <field name="tax_ids" widget="many2many_tags" invisible="1"/>
                <field name="price_subtotal" sum="Amount total" widget="monetary" decoration-bf="1"/>
            </tree>
        </field>
    </record>

    <record id="z_reading_view_vat_12_tree" model="ir.ui.view">
        <field name="name">z_reading.view.vat_12.tree</field>
        <field name="model">pos.order</field>
        <field name="arch" type="xml">
            <tree string="POS Orders" create="0" sample="1" decoration-info="state == 'draft'" decoration-muted="state == 'cancel'">
                <field name="currency_id" invisible="1"/>
                <field name="name" decoration-bf="1"/>
                <field name="session_id"/>
                <field name="date_order"/>
                <field name="pos_reference"/>
                <field name="partner_id"/>
                <field string="Cashier" name="user_id" widget="many2one_avatar_user"/>
                <field name="amount_tax" sum="Amount Tax" widget="monetary" decoration-bf="1"/>
                <field name="state" widget="badge" decoration-info="state == 'draft'" decoration-success="state not in ('draft','cancel')"/>
            </tree>
        </field>
    </record>

    <record id="z_reading_view_vat_exempt_tree" model="ir.ui.view">
        <field name="name">z_reading.view.vat_exempt.tree</field>
        <field name="model">pos.order</field>
        <field name="arch" type="xml">
            <tree string="POS Orders" create="0" sample="1" decoration-info="state == 'draft'" decoration-muted="state == 'cancel'">
                <field name="currency_id" invisible="1"/>
                <field name="name" decoration-bf="1"/>
                <field name="session_id"/>
                <field name="date_order"/>
                <field name="pos_reference"/>
                <field name="partner_id"/>
                <field string="Cashier" name="user_id" widget="many2one_avatar_user"/>
                <field name="amount_total" sum="Amount Total" widget="monetary" decoration-bf="1"/>
                <field name="state" widget="badge" decoration-info="state == 'draft'" decoration-success="state not in ('draft','cancel')"/>
            </tree>
        </field>
    </record>

    <record id="z_reading_view_zero_rated_tree" model="ir.ui.view">
        <field name="name">z_reading.view.zero_rated.tree</field>
        <field name="model">pos.order</field>
        <field name="arch" type="xml">
            <tree string="POS Orders" create="0" sample="1" decoration-info="state == 'draft'" decoration-muted="state == 'cancel'">
                <field name="currency_id" invisible="1"/>
                <field name="name" decoration-bf="1"/>
                <field name="session_id"/>
                <field name="date_order"/>
                <field name="pos_reference"/>
                <field name="partner_id"/>
                <field string="Cashier" name="user_id" widget="many2one_avatar_user"/>
                <field name="amount_total" sum="Amount Total" widget="monetary" decoration-bf="1"/>
                <field name="state" widget="badge" decoration-info="state == 'draft'" decoration-success="state not in ('draft','cancel')"/>
            </tree>
        </field>
    </record>

    <!-- MAIN TREE -->
    <record id="z_reading_view_tree" model="ir.ui.view">
        <field name="name">z_reading.view.tree</field>
        <field name="model">cc_z_reading.z_reading</field>
        <field name="arch" type="xml">
            <tree string="Z-Reading" create="0">
                <field name="id" />
                <field name="start_date" />
                <field name="end_date" />
                <field name="total_sales" />
                <field name="total_returns" />
                <field name="total_voids" />
                <field name="total_discounts" />
                <field name="subtotal" />
                <field name="beginning_reading" optional="hide"/>
                <field name="ending_reading" optional="hide"/>
                <field name="vatable_sales" optional="hide"/>
                <field name="vat_12" optional="hide"/>
                <field name="vat_exempt_sales" optional="hide"/>
                <field name="zero_rated_sales" optional="hide"/>
                <field name="register_total" optional="hide"/>
                <!-- ADD PAYMENTS -->
                <field name="regular_discount" optional="hide"/>
            </tree>
        </field>
    </record>
    
    <!-- MAIN FORM -->
    <record id="z_reading_view_form" model="ir.ui.view">
        <field name="name">cc_z_reading.z_reading.form</field>
        <field name="model">cc_z_reading.z_reading</field>
        <field name="priority" eval="10"/>
        <field name="arch" type="xml">
            <form string="Z-Reading" create="false" edit="false">
                <sheet> 
                    <group col="4" colspan="4">
                        <!-- <field name="id" string="Z-Reading Id" options="{'no_create': True}"/> -->
                        <field name="start_date"/>
                        <field name="end_date"/>
                        <field name="beginning_reading"/>
                        <field name="ending_reading"/>
                    </group>
                    <notebook>
                        <page string="Totals"> 
                            <group>
                                <label class="o_form_label o_readonly_modifier" for="action_view_sales">Total Sales</label>
                                <button name="action_view_sales" class="btn btn-outline-dark btn-sm" type="object">
                                    <field name="total_sales" />
                                </button>
                                <label class="o_form_label o_readonly_modifier" for="action_view_returns">Total Returns</label>
                                <button name="action_view_returns" class="btn btn-outline-dark btn-sm" type="object">
                                    <field name="total_returns" />
                                </button>
                                <field name="total_voids"/>

                                <label class="o_form_label o_readonly_modifier" for="action_view_discounts">Total Discounts</label>
                                <button name="action_view_discounts" class="btn btn-outline-dark btn-sm" type="object">
                                    <field name="total_discounts"/>
                                </button>

                                <field name="subtotal" readonly="1"/>
                            </group>
                        </page>
                        <page string="VAT info">
                            <group>
                                <label class="o_form_label o_readonly_modifier" for="action_view_vat_sales">Vatable Sales</label>
                                <button name="action_view_vat_sales" class="btn btn-outline-dark btn-sm" type="object">
                                    <field name="vatable_sales" />
                                </button>
                                <label class="o_form_label o_readonly_modifier" for="action_view_vat_12">12% VAT</label>
                                <button name="action_view_vat_12" class="btn btn-outline-dark btn-sm" type="object">
                                    <field name="vat_12" />
                                </button>
                                <label class="o_form_label o_readonly_modifier" for="action_view_vat_exempt">VAT Exempt Sales</label>
                                <button name="action_view_vat_exempt" class="btn btn-outline-dark btn-sm" type="object">
                                    <field name="vat_exempt_sales" />
                                </button>
                                <label class="o_form_label o_readonly_modifier" for="action_view_zero_rated">Zero Rated Sales</label>
                                <button name="action_view_zero_rated" class="btn btn-outline-dark btn-sm" type="object">
                                    <field name="zero_rated_sales" />
                                </button>
                                <field name="register_total" readonly="1"/>
                            </group>
                        </page>
                        <page string="Payments">
                            <group>
                                <field name="payments_ids" />
                            </group>
                        </page>
                        <page string="Discounts">
                            <group>
                                <field name="regular_discount"/>
                            </group>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <record id="z_reading_view_action" model="ir.actions.act_window">
        <field name="name">View Z-Reading</field>
        <field name="res_model">cc_z_reading.z_reading</field>
        <field name="view_mode">tree,form</field>
    </record>
    
    <menuitem id="menu_orders_pos_z_reading" action="z_reading_view_action" parent="point_of_sale.menu_point_of_sale" sequence="5"/>
</odoo>
